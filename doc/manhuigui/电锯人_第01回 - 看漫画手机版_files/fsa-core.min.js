!function(){var c={};function a(e){var t,n=e.siteName,a=e.provider?"".concat(e.provider):"",o=e.adName?"".concat(e.adName,"_"):"",i=e.adSize?"_".concat(e.adSize):"",l=e.adSlot?"_".concat(e.adSlot):"",e=e.action?"".concat(e.action):"";n?(t="FSA-v1__".concat(n,"_").concat(o,"_").concat(i,"_").concat(l,"_").concat(e),n="FSA-v2__".concat(a,"_from_").concat(n,"_").concat(o,"_").concat(i,"_").concat(l,"_").concat(e),c[o=""===a?t:n]||(c[o]=0),c[o]+=1,1<c[o]||(i=new Image,l=~~(1e4*Math.random()),i.src="https://logs.sitemaji.com/?t=".concat(o,"&pv=1&rnd=").concat(l))):console.log("site name should be not be null for logger.")}function l(o,i,e){var l=2<arguments.length&&void 0!==e?e:"animate__";return new Promise(function(t,e){var n="".concat(l).concat(i),a="string"==typeof o?document.querySelector(o):o;a.classList.add("".concat(l,"animated"),n),a.addEventListener("animationend",function(e){e.stopPropagation(),a.classList.remove("".concat(l,"animated"),n),t(a)},{once:!0})})}function e(e,t){return key="".concat(t,"|").concat(e),map={"namelongwin|autoplaySlideshow":!0,"feebee|autoplaySlideshow":!0,"findprice|autoplaySlideshow":!0,"rakuten_cmp|slideshowControls":!0},key in map}var o="fsa__ad-container",t="fsa__ad-link",n="single-item",i="feebeeshoppingad-debug",r=document.querySelectorAll(".".concat(t)),d=document.querySelector("."+o),s=document.querySelectorAll(".".concat(n));r||console.error("ad links element not found: ",".".concat(t)),d||console.error("element not found: ","."+o),0<document.querySelectorAll("div[type=fsa_outbound]").length||d.dataset.pub.match(/rakuten_srp|rakuten_cmp|rakuten_rmd|ezneering_cmp|pushbuynow|afs|ypa/)||setTimeout(function(){var e=document.createElement("div"),t=(e.id="fsa__poweredbyfeebee",e.style.position="absolute",e.style.top="0",e.style.right="0","949x330"===d.dataset.size&&(e.style.right="25px"),e.style.zIndex="2",e.style.lineHeight="0",e.style.background="#fff",document.createElement("span")),t=(t.innerHTML='<i fill="currentColor" style="display:inline-block">\n            <svg fill="none" style="display:inline-block;vertical-align:middle" height="20" width="20" viewBox="0 0 24 24" stroke="#ffe400" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n            <circle cx="12" cy="12" r="9">\n            </circle><line x1="12" y1="16" x2="12" y2="12"></line>\n            <line x1="12" y1="8" x2="12" y2="8"></line></svg></i>',e.appendChild(t),document.querySelector("."+o));e&&e.addEventListener("click",function(e){var t=document.createElement("div"),n=(t.style.height="100%",t.innerHTML='\n        <div class="fsa__poweredby-container" style=\'position: relative;width: 100%;height: 100%; margin: 0 auto; background: #fff; border: 1px solid #c1c1c1; box-sizing:border-box;\'>\n        <div id="fsa__goback" style="left: .5em; top: .5em; position: absolute; z-index: 2; font-size: 16px; color: #aaa; margin: 0 !important; padding: 0 !important; border: 0 !important;">⬅</div>\n\n        <div style="height: 100%">\n            <div class=\'article-text\' style=\'font-size: 18px; padding: .5em 5px; font-family: Microsoft JhengHei; color: #4d4d4d; line-height: 3.5em; height: 100%;  text-align:center; \'>由飛比價格提供的相關產品</div>\n            <div style="display: flex; justify-content: space-between; padding: 5px 8px 5px 5px;">\n        </div>\n        </div>\n        ',document.body.insertBefore(t,document.body.firstChild),document.querySelector("."+o));n.style.display="none",document.getElementById("fsa__goback").addEventListener("click",function(e){t.parentNode.removeChild(t),n.style.display="block"}),a({siteName:v,adName:i+"info-icon",adSize:y,adSlot:h}),e.stopPropagation(),e.preventDefault()}),t.appendChild(e)},0);for(var p,u,f,m,g,y=d.dataset.size,v=d.dataset.pub,h=d.dataset.slot,b=0;b<r.length;b++)r[b].addEventListener("click",I),!function(n){var a,o,i;n&&(i=function(e){var o,t=0<arguments.length&&void 0!==e?e:{},i=t.onChange,n=void 0===(n=t.target)?document.body:n,l=void 0===(t=t.ignoreInitial)||t,c=!1,a=new IntersectionObserver(function(e){var t,n,a=null;e.forEach(function(e){(!a||e.time>a.time)&&(a=e)}),a&&(t="hidden",(n=0)<(e=a.intersectionRatio)&&(t="visible",n=e),0===n&&l&&!c?c=!0:o=setTimeout(function(){i({status:t,ratio:n})},0))},{root:null,rootMargin:"0px",threshold:[0,.5,1]});return a.observe(n),{remove:function(){a.disconnect(),clearTimeout(o)}}}({target:n,ignoreInitial:!(o=function(e){"visible"===e.status&&.5<=e.ratio&&1<=e.totalSec&&n.dataset.beacon&&((new Image).src=n.dataset.beacon,n.setAttribute("data-beacon",""))}),onChange:function(e){o(e),clearInterval(a);var t=0;.5<=e.ratio&&(a=setInterval(function(){1<=(t+=1)&&(clearInterval(a),i.remove()),o(Object.assign(e,{iabViewable:!0,totalSec:t,targetAd:n}))},1e3))}}))}(r[b]);function _(e){var t=~~f.dataset.pageNow;console.log("click arrow button.");for(var n=0;n<m;n++){var a=t*m;a+n<s.length&&(s[a+n].style.display="none")}t++,f.dataset.pageNow=t%=g;for(var o=0;o<m;o++){var i=t*m;i+o<s.length&&(s[i+o].style.display="block",l(s[i+o],"fadeIn").then(function(e){}))}}e("slideshowControls",v)&&(n=d,(t=document.createElement("div")).style.position="absolute",t.style.top="calc(50% - 16px)",t.style.right="0",t.style.width="32px",t.style.height="32px",t.style.backgroundColor="#fff",t.style.borderRadius="16px",t.style.boxShadow="0px 2px 4px rgba(0,0,0,.2)",(p=t.cloneNode(!0)).style.left="0",p.style.right="initial",(S=document.createElement("div")).style.width="10px",S.style.height="10px",S.style.marginLeft="9px",S.style.marginTop="11px",S.style.border="1px solid #666",S.style.borderBottom="0",S.style.borderLeft="0",S.style.transform="rotate(45deg)",S.innerText="",(u=S.cloneNode(!0)).style.left="13px",u.style.top="11px",u.style.transform="rotate(-135deg)",t.appendChild(S),p.appendChild(u),m=~~(f=n).dataset.pageSize,g=s.length/f.dataset.pageSize,g=Math.ceil(g),t.addEventListener("click",_),p.addEventListener("click",_),"ontouchstart"in window||(n.appendChild(t),n.appendChild(p)));var x,k,S=e("autoplaySlideshow",v),w=0;function C(){for(var e=0;e<k;e++){var t=w*k;t+e<s.length&&(s[t+e].style.display="none")}w++,w%=pageCount;for(var n=0;n<k;n++){var a=w*k;a+n<s.length&&(s[a+n].style.display="block",l(s[a+n],"fadeIn").then(function(e){}))}}S&&(k=~~d.dataset.pageSize,pageCount=s.length/d.dataset.pageSize,pageCount=Math.ceil(pageCount),(w=0)<s.length&&(s[0].style.display="block"),2<=pageCount&&(x=x||setInterval(C,1e4),C())),window.frameElement?document.body.insertBefore(d,document.body.firstChild):document.querySelector(".fsa_banner").appendChild(d);var z=0,N=setInterval(function(){z+=1,5<=(d.dataset.totalSec=z)&&clearInterval(N)},1e3);function I(e){var e=e.currentTarget,t="click",n=("feebee"===e.dataset.provider&&(t="backfill_click"),{provider:e.dataset.provider,siteName:v,adName:"FSA_click",adSize:y,adSlot:h,action:t});a(n),1<=d.dataset.totalSec&&(t="viewable_click","feebee"===e.dataset.provider&&(t="backfill_viewable_click"),a(n=Object.assign(n,{siteName:"".concat(v),action:t+"_"+d.dataset.totalSec})),"feeso"===e.dataset.provider&&a(Object.assign(n,{adName:"FSA",siteName:"debug-feeso-from-".concat(v)}))),"feeso"===e.dataset.provider&&a({siteName:"debug-feeso-from-".concat(v),adName:"FSA",adSize:y,adSlot:h,action:"click"})}}();